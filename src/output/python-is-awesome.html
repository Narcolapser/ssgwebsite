<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="generator" content="Pelican" />
        <title>Python is Awesome</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <meta name="description" content="Python is wonderful The challenge Just a quick exultation here. I love python. We have a service that used a PHP backend to log get requests into..." />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Studio Sleepy Giraffe</a></h1>
                <nav><ul>
                    <li><a href="/pages/Home.html">Home</a></li>
                    <li class="active"><a href="/category/blog.html">Blog</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/python-is-awesome.html" rel="bookmark"
           title="Permalink to Python is Awesome">Python is Awesome</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2020-05-28T00:00:00-05:00">
                Published: Thu 28 May 2020
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/toben-archer.html">Toben Archer</a>
        </address>
<p>In <a href="/category/blog.html">Blog</a>.</p>
<p>tags: <a href="/tag/python.html">python</a> <a href="/tag/systemd.html">systemd</a> </p>
</footer><!-- /.post-info -->      <h1>Python is wonderful</h1>
<h2>The challenge</h2>
<p>Just a quick exultation here. I love python. We have a service that used a PHP backend to log get requests into a CSV. When we migrated to a new server, it broke, and nobody knew how to fix PHP. I spent 2.5h trying to fix it. I then told my boss I could either continue banging my head or write a python script to do it. The latter would probably be faster. He green lite the python option, and away I went. Thursday morning at 8:30, I started and was told it would be good to have it by Monday. By 9:15, I had written the script, commented it, set up version control, and installed it as a service.</p>
<h2>The script</h2>
<p>The big time-saver here was avoiding Apache or Nginx. And this is made possible by python's built-in Http server. While not a recommended tool for a production environment, it is amazing because it is simple for serving basic utilities. The bulk of the script was just the parsing of the binary strings of the query string into a dictionary for easy formatting. But the three keys were:</p>
<ol>
<li>Extending BaseHTTPRequestHandler with a new do_GET method.</li>
<li>httpd = HTTPServer(('0.0.0.0', 80), {The extended handler from point 1})</li>
<li>httpd.serve_forever()</li>
</ol>
<p>That's all it took to create a webserver that covered all my needs. Amazing. I love it.</p>
<h2>The service</h2>
<p>I'd be remised if I didn't also mention how simple systemd was. It needs a description, path to a file to execute, and a state inclusion. The last one (WantedBy=multi-user.target) isn't intuitive, but it's simple to slap on to everything and call it good. Beyond that:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">cp</span><span class="w"> </span><span class="n">cdprpy</span><span class="o">.</span><span class="n">service</span><span class="w"> </span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">systemd</span><span class="o">/</span><span class="n">system</span><span class="w"></span>
<span class="w">    </span><span class="n">systemctl</span><span class="w"> </span><span class="n">daemon</span><span class="o">-</span><span class="n">reload</span><span class="w"></span>
<span class="w">    </span><span class="n">systemctl</span><span class="w"> </span><span class="n">enable</span><span class="w"> </span><span class="n">cdprpy</span><span class="w"></span>
<span class="w">    </span><span class="n">systemctl</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">cdprpy</span><span class="w"></span>
</code></pre></div>

<p>Done. Ah, this was a satisfying morning.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="https://getpelican.com/">Pelican</a></li>
                            <li><a href="https://www.python.org/">Python.org</a></li>
                            <li><a href="https://palletsprojects.com/p/jinja/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a href="https://www.python.org/">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>